(function(e){var f=e.validator.defaults.highlight;var h=e.validator.defaults.unhighlight;var m=e.validator.prototype.resetForm;var j=e.fn.valid;e.fn.valid=function(){var n=j.call(this);if(e(this[0]).is("form")){if(!n){var o=e(this[0]).validate();o.focusInvalid();return false}}return n};e.extend(e.validator.defaults,{highlight:function(t,n,p){f(t,n,p);if(e(t).is(":text")||e(t).is(":password")||e(t).is("textarea")){e(t).addClass("valid-invalid")}var u="";for(var s=0;this.errorList[s];s++){var r=this.errorList[s];if(r.element==t){u=r.message;break}}var q=e(t).data("my_validator")||{};if(q&&q.errorTip){k(t)}q.errorTip=c(t,u);e(t).data("my_validator",q);var o=document.activeElement;if(o&&e(o).is(t)){e(q.errorTip).show()}b(t,u,this.settings.clorClass)},unhighlight:function(p,n,o){h(p,n,o);e(p).removeClass("valid-invalid");k(p)}});e.extend(e.validator.prototype,{showLabel:e.noop,resetForm:function(){m.call(this);e.each(this.elements(),function(o,n){k(n)})}});function k(o){var n=e(o).data("my_validator")||{};if(n&&n.errorTip){e(n.errorTip).remove()}e(o).removeData("my_validator");g(o)}function b(n,o,p){e(n).bind("mouseover.my_validator",function(){var q=e(n).data("my_validator");if(q&&q.errorTip){e(q.errorTip).show()}}).bind("mouseout.my_validator",function(){var q=e(n).data("my_validator");if(q&&q.errorTip){e(q.errorTip).hide()}});return n}function g(n){e(n).unbind(".my_validator")}function c(q,r){var s=document.createElement("div"),p=document.createElement("span");e("body").append(s);e(s).addClass("colorTipContainer");e(p).addClass("colorTip");e(p).html(r);e(s).append(p);var o=e("<span class='pointyTipShadow'></span><span class='pointyTip'></span>");e(s).append(o);var t=a(q,s);e(s).addClass(t);var n=l(q,s);n.top+="px";n.left+="px";e(s).css({top:n.top,left:n.left});return s}function l(r,p){var s=e(r).offset(),o=e(r).outerWidth(true),t=a(r,p),q=e(".pointyTipShadow",p).outerWidth(true);var n={top:s.top,left:s.left+(t==="left"?o+q:-(e(p).outerWidth(true)+q))};if(!e.support.offsetFractions){n.top=Math.round(n.top);n.left=Math.round(n.left)}return n}function i(n,o){return parseInt(e.css(n,o),10)||0}function a(s,q){var t=e(s).offset(),p=e(s).outerWidth(true),n=e(q).outerWidth(true),r=e(".pointyTipShadow",q).outerWidth(true),o=d();var u=o.width-t.left-p;if(u>=(n+r)){return"left"}if(t.left>=(n+r)){return"right"}return"left"}function d(){if(document.compatMode=="BackCompat"){return{width:Math.max(document.body.scrollWidth,document.body.clientWidth),height:Math.max(document.body.scrollHeight,document.body.clientHeight)}}else{return{width:Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),height:Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)}}}})(jQuery);
